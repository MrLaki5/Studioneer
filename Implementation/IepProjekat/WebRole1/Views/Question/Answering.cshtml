@model WebRole1.Models.Question
@{
    ViewBag.Title = "Answering";
    Layout = "~/Views/Shared/_Layout.cshtml";
}



<style>
    #img-upload {
        width: 250px;
        margin-bottom: 10px;
    }
    
    h2 {
        font-size:45px;
    }
    h4 {
        font-size:28px;
    }
    .labele {
        font-weight:lighter;
        margin-left:10px;
    }
    .texth4 {
        margin-left:50px;

    }
    .letters {
        margin-left:70px;
    }
    .imgz {
        border:1px solid black;
        margin-left:25px;
    }

</style>


<form class="container">

    @Html.AntiForgeryToken()


    @Html.ValidationSummary("", new { @class = "text-danger center" })

    <span style="display:none" id="name">@Model.IdP</span>
    <div class="row">
        <div class="form-group col-md-4 col-md-offset-5">
           <br />
            <h2>@Model.Title</h2>
        </div>
        </div>
    <div class="row">
        <div class="form-group col-md-4 col-md-offset-4">
            <h4 class="texth4">@Model.Text</h4>
        </div>
    </div>

    <div class="row">
        @if (@Model.ImageName != null)
            {
            <div class="col-md-4 col-md-offset-4">
                
                <img class="img-responsive imgz" id='img-upload' src="/Images/@Model.ImageName" />
                <br />
            </div>
        }
    </div>

    <div class="row">
        
        @foreach (var item in Model.Answers)
            {

            <div class="input-group col-md-8 col-md-offset-4">
                <span class="letters">@item.Tag)</span>
                <label id="msg" type="text" name="answer @item.Number">@item.Text</label>
                &nbsp
                @if (@item.IsCorrect == 1)
                {
                    <label class="labele"><input type="radio" checked name="radio202"></label>
                }
                else
                {
                    <label class="labele"><input type="radio" name="radio202"></label>
                }
            </div>
        }

      </div>
            <div class="form-group"></div>

            @if (ViewBag.clone == 0)
            {
                <div class="form-group col-md-4">
                    <button type="button" class="btn btn-primary" id="beck"><span class="glyphicon glyphicon-arrow-left"></span>&nbsp Back</button>
                    @if (Model.IsLocked == 1)
                {
                        <span id="buttCh"><button type="button" class="btn btn-primary" id="unlock"><span class="glyphicon glyphicon-lock"></span>&nbsp Unlock (@ViewBag.unlock)</button></span>
                    }
                    else
                    {
                        <button type="button" class="btn btn-primary" id="edit"><span class="glyphicon glyphicon-edit"></span>&nbsp Edit</button>
                    }
                </div>
            }
            else
            {
                <div class="form-group col-md-4 col-md-offset-4">
                    <button type="button" class="btn btn-primary" id="beckC"><span class="glyphicon glyphicon-arrow-left"></span>&nbsp Back</button>
                    <button type="button" class="btn btn-primary" id="sendAnswer"><span class="glyphicon glyphicon-print"></span>&nbsp Submit</button>
                </div>
            }

</form>


<script src="~/Scripts/jquery-1.10.2.js" type="text/javascript"></script>
<script type="text/javascript">

    $(document).ready(function () {

        $('#beck').on('click', function clckF() {
            window.location = "@Url.Action("Index", "Question")";
        });

        $('#beckC').on('click', function clckF2() {
            window.history.back();
        });

        $('#edit').on('click', function clckF1() {
            var number = $('#name').text();
            window.location = '@Url.Action("Editor", "Question")/'+number;
        });

        $('#unlock').on('click', function clickU() {
            var number = $('#name').text();
            $.ajax({
            type: "POST",
            data: { id: number },
            url: '@Url.Action("Index", "Question")',
                success: function (result) {
                    if (result !== "error") {
                        var elem1 = document.getElementById("numtoken");
                        elem1.innerHTML = result;

                        var actname ='<button type="button" class="btn btn-primary" id="edit1"><span class="glyphicon glyphicon-edit"></span>&nbsp Edit</button>';

                        elem1 = document.getElementById("buttCh");
                        elem1.innerHTML = actname;

                        $('#edit1').on('click', function clckF1() {
                               var number = $('#name').text();
                                window.location = '@Url.Action("Editor", "Question")/'+number;
                        });

                    }
                }
            });
        });


    });
</script>

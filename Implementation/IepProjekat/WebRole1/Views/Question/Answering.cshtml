@model WebRole1.Models.Question
@{
    ViewBag.Title = "Answering";
    Layout = "~/Views/Shared/_Layout.cshtml";
}



<style>
    #img-upload {
        width: 200px;
        margin-bottom: 10px;
    }
    

</style>


<form class="container boxy">

    @Html.AntiForgeryToken()


    @Html.ValidationSummary("", new { @class = "text-danger center" })

    <span style="display:none" id="name">@Model.IdP</span>
    <div class="row">
        <div class="form-group col-md-4 col-md-offset-5">
            <label for="title">Title:</label><br />
            @Html.DisplayFor(model => model.Title)
        </div>
        </div>
    <div class="row">
        <div class="form-group col-md-4 col-md-offset-5">
            <label for="text">Text:</label><br />
            @Html.DisplayFor(model => model.Text)
        </div>
    </div>

    <div class="row">
        @if (@Model.ImageName != null)
            {
            <div class="col-md-4 col-md-offset-5">
                <label>Image:</label><br />
                <img id='img-upload' src="/Images/@Model.ImageName" />
                <br />
            </div>
        }
    </div>

    <div class="row">
        <label class="input-group col-md-4 col-md-offset-4">Answers:</label><br />
        @foreach (var item in Model.Answers)
            {

            <div class="input-group col-md-8 col-md-offset-4">
                <span class="input-group-addon item">@item.Tag)</span>
                <input id="msg" type="text" class="form-control" name="answer @item.Number" maxlength="100" required disabled value="@item.Text" />
                &nbsp
                @if (@item.IsCorrect == 1)
                {
                    <label class=".radio-inline"><input type="radio" checked name="radio202" value="@item.Number">Select Correct Answer</label>
                }
                else
                {
                    <label class=".radio-inline"><input type="radio" name="radio202" value="@item.Number">Select Correct Answer</label>
                }
            </div>
        }

      </div>
            <div class="form-group"></div>

            @if (ViewBag.clone == 0)
            {
                <div class="form-group col-md-4">
                    <button type="button" class="btn btn-primary" id="beck"><span class="glyphicon glyphicon-arrow-left"></span>&nbsp Back</button>
                    @if (Model.IsLocked == 1)
                {
                        <span id="buttCh"><button type="button" class="btn btn-primary" id="unlock"><span class="glyphicon glyphicon-lock"></span>&nbsp Unlock (@ViewBag.unlock)</button></span>
                    }
                    else
                    {
                        <button type="button" class="btn btn-primary" id="edit"><span class="glyphicon glyphicon-edit"></span>&nbsp Edit</button>
                    }
                </div>
            }
            else
            {
                <div class="form-group col-md-4 col-md-offset-4">
                    <button type="button" class="btn btn-primary" id="beckC"><span class="glyphicon glyphicon-arrow-left"></span>&nbsp Back</button>
                    <button type="button" class="btn btn-primary" id="sendAnswer"><span class="glyphicon glyphicon-print"></span>&nbsp Submit</button>
                </div>
            }

</form>


<script src="~/Scripts/jquery-1.10.2.js" type="text/javascript"></script>
<script type="text/javascript">

    $(document).ready(function () {

        $('#beck').on('click', function clckF() {
            window.location = "@Url.Action("Index", "Question")";
        });

        $('#beckC').on('click', function clckF2() {
            window.history.back();
        });

        $('#edit').on('click', function clckF1() {
            var number = $('#name').text();
            window.location = '@Url.Action("Editor", "Question")/'+number;
        });

        $('#unlock').on('click', function clickU() {
            var number = $('#name').text();
            $.ajax({
            type: "POST",
            data: { id: number },
            url: '@Url.Action("Index", "Question")',
                success: function (result) {
                    if (result !== "error") {
                        var elem1 = document.getElementById("numtoken");
                        elem1.innerHTML = result;

                        var actname ='<button type="button" class="btn btn-primary" id="edit1"><span class="glyphicon glyphicon-edit"></span>&nbsp Edit</button>';

                        elem1 = document.getElementById("buttCh");
                        elem1.innerHTML = actname;

                        $('#edit1').on('click', function clckF1() {
                               var number = $('#name').text();
                                window.location = '@Url.Action("Editor", "Question")/'+number;
                        });

                    }
                }
            });
        });


    });
</script>
